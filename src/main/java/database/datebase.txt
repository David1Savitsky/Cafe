create database cafe

use cafe

create table user(
    id int primary key auto_increment,
    name varchar(50) not null,
    surname varchar(50) not null,
    login varchar(50) not null,
    password varchar(32) not null,
    is_admin bool not null,
    amount decimal(10,2) not null default 0,
    loyalty_points int not null,
    is_blocked bool not null default 0
);

create table food(
    id int primary key auto_increment,
    name varchar(50) not null,
    type enum('drink', 'meal') not null,
    price int not null,
    is_disabled bool not null default 0
);

create table user_order(
    id int primary key auto_increment,
    visiting_time datetime not null,
    user_id int not null,
    is_paid bool not null default 0,
    payment_type enum('account', 'cash') not null default 'cash',
    rating tinyint not null default 10,
    comment varchar(500),
    foreign key (user_id) references user(id)
);

create table user_order_food(
    id int primary key auto_increment,
	user_order_id int not null,
    food_id int not null,
    count int not null,
    foreign key (user_order_id) references user_order(id),
    foreign key (food_id) references food(id)
);